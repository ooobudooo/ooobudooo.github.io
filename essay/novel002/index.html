<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>深色小说阅读器</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s;
        }

        body {
            font-family: 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #121212;
            color: #FFFFFF;
            line-height: 1.8;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            padding: 0;
        }

        /* 阅读区域 */
        .reader-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .reader-controls {
            padding: 12px 15px;
            background: #1a1a1a;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .font-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .font-controls button {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #2a2a2a;
            border: 1px solid #333;
            color: #FFFFFF;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .font-controls button:hover {
            background: #333;
            transform: scale(1.1);
        }

        .nav-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            background: #2a2a2a;
            color: #FFFFFF;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .control-btn:hover {
            background: #333;
            border-color: #444;
        }

        /* 阅读内容 */
        .reader-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px 15px;
            margin: 0 auto;
            width: 100%;
            max-width: 800px;
        }

        .markdown-content {
            font-size: 1.1rem;
            line-height: 1.9;
            text-align: left;
        }

        .markdown-content h1 {
            font-size: 2.0rem;
            margin: 1.5rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
            color: #FFFFFF;
            font-weight: 600;
        }

        .markdown-content h2 {
            font-size: 1.7rem;
            margin: 1.3rem 0 0.8rem;
            color: #FFFFFF;
            font-weight: 600;
        }

        .markdown-content h3 {
            font-size: 1.4rem;
            margin: 1.1rem 0 0.7rem;
            color: #FFFFFF;
            font-weight: 500;
        }

        .markdown-content p {
            margin: 1.2rem 0;
        }

        .markdown-content blockquote {
            border-left: 4px solid #555;
            padding: 0.8rem 1.2rem;
            margin: 1.2rem 0;
            background: #1a1a1a;
            border-radius: 0 4px 4px 0;
            font-style: italic;
            color: #e0e0e0;
        }

        .markdown-content pre {
            background: #1a1a1a;
            padding: 1.2rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1.5rem 0;
            border-left: 3px solid #555;
        }

        .markdown-content code {
            font-family: 'Fira Code', 'Courier New', monospace;
            background: #1a1a1a;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            color: #ffffff;
        }

        .markdown-content strong {
            font-weight: bold;
            color: #ffffff;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            border: 1px solid #333;
        }

        .markdown-content th, .markdown-content td {
            border: 1px solid #333;
            padding: 0.8rem;
            text-align: left;
            color: #ffffff;
        }

        .markdown-content th {
            background-color: #1a1a1a;
            font-weight: bold;
        }

        /* 底部信息 */
        footer {
            padding: 12px 15px;
            background: #1a1a1a;
            border-top: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #cccccc;
        }

        /* 响应式设计 - 移动设备优化 */
        @media (max-width: 768px) {
            .reader-content {
                padding: 15px 10px;
            }
            
            .reader-controls {
                padding: 10px;
                gap: 5px;
            }
            
            .control-btn {
                padding: 6px 10px;
                font-size: 0.9rem;
            }
            
            .font-controls button {
                width: 32px;
                height: 32px;
                font-size: 1.1rem;
            }
            
            .markdown-content h1 {
                font-size: 1.7rem;
            }

            .markdown-content h2 {
                font-size: 1.4rem;
            }

            .markdown-content h3 {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .reader-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .nav-controls {
                justify-content: center;
                margin-top: 8px;
            }
            
            .font-controls {
                justify-content: center;
            }
            
            .markdown-content h1 {
                font-size: 1.5rem;
            }
            
            footer {
                flex-direction: column;
                gap: 5px;
                text-align: center;
            }
        }

        /* 深色滚动条 */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #444;
        }
        
        /* 进度指示器 */
        .progress-bar {
            height: 4px;
            width: 100%;
            background: #2a2a2a;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
        }
        
        .progress {
            height: 100%;
            background: #555;
            width: 35%;
            transition: width 0.3s ease;
        }
        
        .title {
            text-align: center;
            padding: 10px 0 20px;
            font-size: 1.2rem;
            color: #ccc;
        }
        
        .content-container {
            display: none;
        }
        
        .loading {
            text-align: center;
            padding: 50px 0;
            color: #777;
        }
    </style>
</head>
<body>
    <!-- 顶部进度条 -->
    <div class="progress-bar">
        <div class="progress"></div>
    </div>
    
    <!-- 阅读区域 -->
    <div class="reader-container">
        <div class="reader-controls">
            <div class="font-controls">
                <button id="decreaseFont" title="减小字体">
                    A-
                </button>
                <button id="increaseFont" title="增大字体">
                    A+
                </button>
            </div>
            <div class="nav-controls">
                <button id="prevChapter" class="control-btn">
                    <i class="fas fa-chevron-left"></i> 上一章
                </button>
                <button id="nextChapter" class="control-btn">
                    下一章 <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        <div class="reader-content">
            <div class="title">《暗影纪元》</div>
            <div class="content-container">
                <div id="markdown-content" class="markdown-content"></div>
            </div>
            <div id="loading" class="loading">内容加载中...</div>
        </div>
    </div>

    <!-- 底部信息 -->
    <footer>
        <div>第 7 章 · 作者：墨影 · 共85章</div>
        <div>阅读时长：28分钟</div>
    </footer>

    <script>
        // 确保marked库加载完成后再渲染内容
        document.addEventListener('DOMContentLoaded', function() {
            // 检查marked是否加载成功
            if (typeof marked === 'undefined') {
                document.getElementById('loading').innerHTML = 'Markdown解析库加载失败，正在显示纯文本内容...';
                renderPlainText();
            } else {
                renderContent();
            }
        });

        // 渲染Markdown内容
        function renderContent() {
            // 示例Markdown内容
            const markdownContent = `
# 《南北》

## 第一章 分野

高二那年的全市辩论赛决赛，对15班的黄思远而言，本只是一项需要凑人数的集体活动。他坐在礼堂第三排，百无聊赖地翻着物理错题集，直到聚光灯打在那个文重班的女生身上。

她穿着洗得发白的校服衬衫，袖口利落地卷至肘弯，露出一截线条流畅的小臂。高马尾束得一丝不苟，衬得脖颈修长。当反方四辩引用一段据称是梁启超的论述时，她并未立刻反驳，而是微微偏头，侧脸在灯光下勾勒出清晰而柔和的轮廓，唇角忽然牵起一个极淡的弧度——不是讥诮，倒像在旧书页里发现了意外惊喜的批注。

“抱歉打断，”她的声音不高，却像投入静湖的石子，瞬间荡开清晰的涟漪，“您引用的这段话，实际出自1934年《国语周刊》一篇署名‘守拙散人’的戏仿小品。原作者在当期编后记第三段末尾明确说明，此为游戏笔墨，仅供诸君一笑。”她目光扫过评委席，那里坐着以治学严谨著称的语文特级教师，“卷期页码，需要我提供吗？”

礼堂一片哗然。黄思远手中的笔停在错题集上，忘了挪开。他看到她起身陈述时，高马尾随着动作划出一道干净利落的弧线，后颈发际线边缘一颗淡褐色的小痣在灯光下一闪而没。那一刻，这个女生像一束锐利而纯粹的光，猝不及防地刺穿了礼堂的沉闷和他按部就班的理科生世界。他记住了那颗痣，也记住了她拆穿伪作时那双亮得惊人的眼睛，以及那身简单白衬衫下透出的、不容置疑的笃定。

赛后，黄思远从身边兴奋议论的同学口中捕捉到了她的名字：“林嘉言？五班那个文重的？厉害啊！” 他记住了这个名字。

他们原本并无交集。文理分科后，一个在二楼东头走廊尽头的15班，一个在四楼西侧的5班，如同两条平行轨道。黄思远知道林嘉言是文重的翘楚，作文常被印成范文，课间总爱独自倚着四楼走廊尽头的栏杆，望向北边灰蒙蒙的天空出神。但也仅此而已。她对他，如同教学楼外那排沉默的香樟树，是校园背景里一个模糊的注脚。

南方的梅雨如期而至，空气粘稠得能拧出水。黄思远抱着收齐的本班地理作业穿过空旷的连廊去三楼教师办公室，路过三楼的开放式校史陈列角时，瞥见一个熟悉的身影。林嘉言正蹲在一个蒙尘的玻璃展柜前，鼻尖几乎贴到玻璃上，专注地看里面一张泛黄的旧地图。她没穿校服外套，单薄的衬衫勾勒出清瘦的肩背，高马尾垂落几缕碎发贴在颊边。

“在看什么？”黄思远停下脚步，声音在寂静的连廊里显得突兀。

林嘉言闻声抬头，眼中闪过一丝被打扰的微恼。但看清是他——那个辩论赛上坐在前排、个子很高、目光专注的男生——她神色稍缓，甚至带了一丝确认的意味：“是你？”

“永州府的古舆图，”她指指展柜，指尖点在玻璃上一条蜿蜒的蓝色水线上，“看潇水和湘水怎么交汇。”

黄思远走近，微微躬身细看。地图线条古拙，字迹模糊。他凝视着那两条水线交汇处，沉吟道：“‘清浊异流’？” **(去掉“他想起地理课上提过的”，改为当下观察和思考)**

林嘉言有些意外地看了他一眼，眼中那点微恼被一丝兴趣取代：“你也知道这个？”她站起身，拍了拍裤脚的灰，“课本里可没提过这个。” **(明确课本不涉及，表示惊讶)**

“嗯，”黄思远点头，目光却没离开地图，“课外书上看到的。” **(合理解释来源：体现热爱地理的课外积累)** 他顿了顿，补充道，“……挺有意思的，像大自然画的界限。”

林嘉言唇角微扬，那个辩论赛上发现“宝藏”似的浅笑又出现了：“没错，天然的刻度。”她似乎犹豫了一下，还是开口问道：“对了，你是15班的……？”

“黄思远。”他报上名字。
“林嘉言。”她点点头，算是正式互通了姓名。她没再多说，抱起放在一旁的几本书离开了。黄思远注意到最上面一本是《唐宋词选注》，书页里夹着一枚旧书页裁成的书签，隐约可见竖排的繁体字，似乎是某本古籍的残页。

这次偶遇像打开了一道窄门。之后在图书馆地理区或走廊相遇，他们会点头示意。有次黄思远在图书馆找一本绝版的地理图册未果，隔天林嘉言竟主动告诉他三楼教师资料室可能有影印本。作为交换，黄思远帮她解过一道困扰她许久的、涉及经纬度计算的综合题——他数理化的底子在这时显出了优势。他们的话题仅限于此——一道题、一本书、一个地理现象。黄思远话不多，但言必有物，逻辑清晰，偶尔引用的古诗或对自然现象的比喻，常让林嘉言眼中掠过一丝欣赏。他像理科班里的一个异数：沉静内敛，不张扬，但思维开阔，对文字和自然之美有敏锐的感知力，只是被繁重的物化习题和升学压力暂时封存。他对计算机技术的兴趣，则体现在他指尖偶尔残留的、淡淡的金属和塑料气味，以及书包侧袋露出的编程书籍一角。

高三在《高校招生专业目录》如山的压力下拉开序幕。黄思远的目标明确指向华南理工大学的计算机专业。而林嘉言的那本目录，北京大学历史系的介绍页被荧光笔涂得一片灿然，折痕深深，仿佛承载了所有的重量。课间，四楼西侧走廊那个倚栏北望的身影依旧准时出现。

某个放晴的午后，黄思远被物理老师叫去办公室分析竞赛卷，回来时特意绕到四楼。林嘉言果然在那里，手里捧着的是一本关于燕园风物的书。

“决定了？”他走到她旁边，隔着半米距离，目光也投向北方。天际线被城市轮廓切割，灰蒙蒙一片。

“嗯。”林嘉言没回头，指尖轻轻摩挲着书页上一张未名湖秋色的照片，“就像候鸟认准了迁徙的路线。”

黄思远沉默片刻：“南方也有很多好大学，气候也适应。” 他话里自然带出了对自己目标的考量。

林嘉言终于侧过脸看他，眼神清澈而坚定：“有些风景，只有站在特定的纬度才能看清全貌。就像……”她顿了顿，似乎想找个更理科化的比喻，“就像观察天体运行，需要选择最佳的观测站。”

寒假前一场冷雨突袭。黄思远在自行车棚躲雨，看见林嘉言把书包顶在头上准备冲进雨幕。他下意识撑开自己的伞，大步走过去罩在她头顶。交接的瞬间，一本厚厚的册子从她臂弯滑落，“啪”地跌入水洼。是那本燕园风物书。溅起的水花打湿了封面，翻开的内页正是一张国子监古槐虬枝的特写，枝干上系满了褪色的祈福红绸。

“谢谢。”林嘉言迅速捞起书，顾不上自己，先小心地拂去封面的泥水。翻开扉页，一个模糊的蓝黑色藏书章旁，一行褪色的钢笔字迹清晰可见：1989.10.京。“我爸年轻时在那拍的。”她轻声说，指尖拂过那行字，带着一种近乎虔诚的温柔，“就在北大旁边。”

冰冷的雨水顺着车棚锈蚀的铁皮檐沟，成串砸落，声音沉闷。黄思远看着她专注擦拭书页水痕的侧影，忽然无比清晰地意识到，北京于她，是血脉里流淌的召唤，是精神上的“最佳观测站”。而他锚定的未来，在南方的炽热与代码构筑的世界里。两条轨迹，在高三这个节点短暂交汇后，注定要沿着各自的经线，奔向截然不同的维度。

毕业典礼在细雨中进行。林嘉言作为文科优秀生代表发言，高马尾依旧，言辞间带着文科生特有的理想与锋芒。散场时，黄思远在挂满“前程似锦”横幅的喧闹走廊里，被林嘉言塞了一张硬质的卡片。低头一看，是冬日未名湖的雪景明信片，湖心岛石舫覆雪，岸边柳枝凝霜，湖光塔影在素白中静默。

“给，”她的声音在嘈杂中异常清晰，眼神亮如初见，“南方人总以为北方只有严寒，却忘了冰雪之下，睡着来年所有的春天。” 她顿了顿，像是想起了什么，又轻轻加了一句，“就像潇水和湘水，清浊各自流，终归大江。” 说完，她转身汇入人潮，高马尾在细雨中划出一道利落的轨迹，消失在教学楼的转角。

黄思远捏着那张带着凉意的卡片，站在湿漉漉的香樟树下。卡片背面，未名湖雪景无言。两千一百公里——从广州到北京——像一道骤然具象化、冰冷而沉默的分野，横亘在眼前。梅雨季最后的雨水，重重敲打着树叶，也敲打着他心中那个尚未填写的、关于未来的空格。
`;
            
            try {
                // 渲染Markdown内容
                document.getElementById('markdown-content').innerHTML = marked.parse(markdownContent);
                
                // 隐藏加载提示，显示内容
                document.getElementById('loading').style.display = 'none';
                document.querySelector('.content-container').style.display = 'block';
            } catch (e) {
                console.error('Markdown解析错误:', e);
                document.getElementById('loading').innerHTML = '内容解析失败，正在显示纯文本...';
                renderPlainText(markdownContent);
            }
        }
        
        // 显示纯文本内容（备用方案）
        function renderPlainText(content) {
            if (!content) {
                content = `# 暗影之塔

夜幕低垂，月光被浓密的乌云遮蔽。凯尔站在古老的高塔前，手中的火把在风中摇曳，投射出扭曲的影子。这座塔已经废弃了数百年，但今晚，塔顶却闪烁着不祥的紫色光芒。

"终于找到了..."凯尔喃喃自语，握紧了腰间的剑柄。

## 塔内结构

高塔内部的结构出人意料的复杂：

1. 入口大厅 - 布满陷阱的机关地板
2. 藏书室 - 被诅咒的魔法典籍
3. 实验室 - 炼金术士的遗留装置
4. 观星台 - 能量波动源头
5. 禁闭室 - 未知生物的低语

凯尔小心翼翼地避开入口大厅的机关，地板上的符文在火把照耀下若隐若现。

【侦测到魔法陷阱】
类型：火焰符文
解除难度：中等

## 实验室的发现

在暗格中，凯尔找到了一本皮革封面的日志：

日期：星历347年霜月17日
实验记录 #42

水晶对暗影能量的共鸣超出预期。当暴露在月光下时：
- 能量输出增加300%
- 周围空间出现不稳定波动
- 实验动物表现出攻击性增强

警告：水晶似乎具有意识，开始影响研究人员梦境。

## 顶层的对峙

当凯尔到达观星台时，眼前的景象让他屏住了呼吸：

巨大的紫色水晶悬浮在房间中央，散发着诡异的能量波动。水晶下方是一个复杂的魔法阵，七个身穿黑袍的人影围绕法阵站立。

"你来得太迟了，猎魔人。"为首的黑袍人转过身，兜帽下是深不见底的黑暗，"暗影之门即将开启！"

凯尔拔出长剑："以光之名，我绝不会让你们的计划得逞！"

黑袍人发出刺耳的笑声："光？在这个地方？" 他抬手一挥，房间内所有光源瞬间熄灭。

在绝对的黑暗中，凯尔听到了利爪摩擦地面的声音...`;
            }
            
            document.getElementById('markdown-content').innerHTML = 
                `<pre style="white-space: pre-wrap;">${content}</pre>`;
            document.getElementById('loading').style.display = 'none';
            document.querySelector('.content-container').style.display = 'block';
        }

        // 字体大小控制
        let fontSize = 1.1;
        
        document.getElementById('increaseFont').addEventListener('click', () => {
            if (fontSize < 1.5) {
                fontSize += 0.1;
                updateFontSize();
            }
        });
        
        document.getElementById('decreaseFont').addEventListener('click', () => {
            if (fontSize > 0.8) {
                fontSize -= 0.1;
                updateFontSize();
            }
        });
        
        function updateFontSize() {
            document.querySelector('.markdown-content').style.fontSize = fontSize + 'rem';
        }
        
        // 章节导航
        let currentChapter = 7;
        const totalChapters = 85;
        
        document.getElementById('nextChapter').addEventListener('click', () => {
            if (currentChapter < totalChapters) {
                currentChapter++;
                updateChapter();
            }
        });
        
        document.getElementById('prevChapter').addEventListener('click', () => {
            if (currentChapter > 1) {
                currentChapter--;
                updateChapter();
            }
        });
        
        function updateChapter() {
            document.querySelector('footer div:first-child').textContent = 
                `第 ${currentChapter} 章 · 作者：墨影 · 共${totalChapters}章`;
        }
        
        // 滚动进度
        window.addEventListener('scroll', function() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercent = (scrollTop / scrollHeight) * 100;
            
            document.querySelector('.progress').style.width = scrollPercent + '%';
        });
        
        // 移动设备优化
        function adjustForMobile() {
            if (window.innerWidth <= 480) {
                fontSize = 1.0;
                updateFontSize();
            }
        }
        
        window.addEventListener('resize', adjustForMobile);
        adjustForMobile();
    </script>
</body>
</html>
